<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Location.js tests</title>
        <link rel="stylesheet" type="text/css" href="../css/jsUnitStyle.css">
		<script language="JavaScript" type="text/javascript" src="jsunit/app/jsUnitCore.js"></script>
		<script language="JavaScript" type="text/javascript" src="jsmock/mock.js"></script>
		<script language="JavaScript" type="text/javascript" src="../jsx.js">
		  return {base:'jquery'}
		</script>
    <script language="JavaScript" type="text/javascript" src="../Location.js"></script>
    </head>
    <body>
    </body>
    <script language="JavaScript" type="text/javascript">
		function setUp(){
		}
		function tearDown(){
		}
		function test_getParam(){
      assertEquals('bar', jsx.Location.getParam('foo', 'foo.bar?foo=bar'));
      assertEquals('bar', jsx.Location.getParam('foo', 'foo.bar?foo=bar&bar=foo'));
      assertEquals('foo', jsx.Location.getParam('bar', 'foo.bar?foo=bar&bar=foo'));
      assertEquals('', jsx.Location.getParam('foo', 'foo.bar?foo='));
      assertEquals('bar', jsx.Location.getParam('foo', 'http://www.example.com/foo.xml?foo=bar'));
      assertEquals(null, jsx.Location.getParam('bar', 'http://www.example.com/foo.xml?foo=bar'));
      assertEquals('%FF%ED%E4%E5%EA%F1', jsx.Location.getParam('text', 'http://news.beta.yandex.ru/yandsearch?rpt=nnews2&grhow=clutop&text=%FF%ED%E4%E5%EA%F1'));
		}
		function test_getHash(){
      assertEquals('', jsx.Location.getHash(''));
      assertEquals('bar', jsx.Location.getHash('#bar'));
      assertEquals('', jsx.Location.getHash('#'));
      assertEquals('bar', jsx.Location.getHash('foo.bar?foo=bar#bar'));
      assertEquals('', jsx.Location.getHash('foo.bar?foo=bar'));
      assertEquals('bar', jsx.Location.getHash('foo.bar?foo=bar&bar=foo#bar'));
      assertEquals('bar', jsx.Location.getHash('foo.bar?foo=#bar'));
      assertEquals('bar', jsx.Location.getHash('http://www.example.com/foo.xml?foo=bar#bar'));
      assertEquals('', jsx.Location.getHash('http://www.example.com/foo.xml?foo=bar'));
		}
	</script>
 </html>

